{"is_source_file": true, "format": "JavaScript", "description": "This file defines validation rules and controller handlers for patient-related API endpoints in a Node.js Express application. It includes methods for listing, creating, retrieving, updating, and deleting patient records, utilizing a patients service module.", "external_files": ["../services/patients"], "external_methods": ["patientsService.list", "patientsService.create", "patientsService.getById", "patientsService.updateById", "patientsService.deleteById"], "published": ["controller", "validators"], "classes": [{"name": "PatientsController", "description": "Controller class providing CRUD endpoint handlers for patient data."}], "methods": [{"name": "list(req, res, next)", "description": "Handles GET requests to list patients with optional search and pagination.", "scope": "PatientsController", "scopeKind": "class"}, {"name": "create(req, res, next)", "description": "Handles POST requests to create a new patient record.", "scope": "PatientsController", "scopeKind": "class"}, {"name": "get", "description": "Handles GET requests to retrieve a patient by ID."}, {"name": "update", "description": "Handles PUT/PATCH requests to update a patient's information by ID."}, {"name": "remove", "description": "Handles DELETE requests to remove a patient by ID."}], "calls": ["patientsService.list", "patientsService.create", "patientsService.getById", "patientsService.updateById", "patientsService.deleteById"], "search-terms": ["patients", "PatientsController", "validation rules", "CRUD handlers", "patient endpoints", "express-validator", "patient service"], "state": 2, "file_id": 22, "knowledge_revision": 44, "git_revision": "", "ctags": [{"_type": "tag", "name": "PatientsController", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^class PatientsController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "controller", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  controller: new PatientsController(),$/", "language": "JavaScript", "kind": "property", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  async create(req, res, next) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res, next)", "scope": "PatientsController", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  create: [$/", "language": "JavaScript", "kind": "property", "scope": "validators", "scopeKind": "class"}, {"_type": "tag", "name": "deleted", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^      const deleted = await patientsService.deleteById(req.params.id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^module.exports = {$/", "language": "JavaScript", "kind": "class", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "idParam", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  idParam: [param('id').isMongoId().withMessage('Invalid patient id')],$/", "language": "JavaScript", "kind": "property", "scope": "validators", "scopeKind": "class"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^      const item = await patientsService.getById(req.params.id);$/", "language": "JavaScript", "kind": "field", "scope": "PatientsController", "scopeKind": "class"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^      if (!item) return res.status(404).json({ status: 'error', message: 'Patient not found' });$/", "language": "JavaScript", "kind": "field", "scope": "PatientsController", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  async list(req, res, next) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res, next)", "scope": "PatientsController", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  list: [$/", "language": "JavaScript", "kind": "property", "scope": "validators", "scopeKind": "class"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  async get(req, res, next) {$/", "language": "JavaScript", "kind": "field", "scope": "PatientsController", "scopeKind": "class"}, {"_type": "tag", "name": "patientsService", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^const patientsService = require('..\\/services\\/patients');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "req", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  async get(req, res, next) {$/", "language": "JavaScript", "kind": "field", "scope": "PatientsController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^      if (!item) return res.status(404).json({ status: 'error', message: 'Patient not found' });$/", "language": "JavaScript", "kind": "field", "scope": "PatientsController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^      res.json({ status: 'ok', item });$/", "language": "JavaScript", "kind": "field", "scope": "PatientsController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  async get(req, res, next) {$/", "language": "JavaScript", "kind": "field", "scope": "PatientsController", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  update: [$/", "language": "JavaScript", "kind": "property", "scope": "validators", "scopeKind": "class"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^      const updated = await patientsService.updateById(req.params.id, req.body);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validators", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^  validators,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "validators", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/patients.js", "pattern": "/^const validators = {$/", "language": "JavaScript", "kind": "class"}], "hash": "f7033df53ec1afcb9ca3a0e757a0d285", "format-version": 4, "code-base-name": "backend_triagens", "filename": "backend_triagens/src/controllers/patients.js", "fields": [{"name": "controller: new PatientsController(),", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "create: [", "scope": "validators", "scopeKind": "class", "description": "unavailable"}, {"name": "idParam: [param('id').isMongoId().withMessage('Invalid patient id')],", "scope": "validators", "scopeKind": "class", "description": "unavailable"}, {"name": "const item = await patientsService.getById(req.params.id);", "scope": "PatientsController", "scopeKind": "class", "description": "unavailable"}, {"name": "if (!item) return res.status(404).json({ status: 'error', message: 'Patient not found' });", "scope": "PatientsController", "scopeKind": "class", "description": "unavailable"}, {"name": "list: [", "scope": "validators", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(req, res, next) {", "scope": "PatientsController", "scopeKind": "class", "description": "unavailable"}, {"name": "res.json({ status: 'ok', item });", "scope": "PatientsController", "scopeKind": "class", "description": "unavailable"}, {"name": "update: [", "scope": "validators", "scopeKind": "class", "description": "unavailable"}, {"name": "validators,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"44": ""}]}