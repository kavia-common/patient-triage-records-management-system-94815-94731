{"is_source_file": true, "format": "JavaScript", "description": "This file defines validation rules and controller methods for handling CRUD operations related to 'triages' in a patient triage records management system. It sets up express-validator middleware for input validation and implements controller methods for listing, creating, retrieving, updating, and deleting triage records, interfacing with a service layer.", "external_files": ["../services/triages"], "external_methods": ["triagesService.list", "triagesService.create", "triagesService.getById", "triagesService.updateById", "triagesService.deleteById"], "published": ["controller", "validators"], "classes": [{"name": "TriagesController", "description": "A controller class providing CRUD handlers for triage records, including list, create, get, update, and remove methods."}], "methods": [{"name": "list(req, res, next)", "description": "Handles listing triage records with optional filtering by patient and status. Uses query parameters for pagination and filtering.", "scope": "TriagesController", "scopeKind": "class"}, {"name": "create(req, res, next)", "description": "Creates a new triage record with validated input data.", "scope": "TriagesController", "scopeKind": "class"}, {"name": "get", "description": "Retrieves a specific triage record by its ID."}, {"name": "update", "description": "Updates an existing triage record identified by ID with new data."}, {"name": "remove", "description": "Deletes a triage record by its ID."}], "calls": ["triagesService.list", "triagesService.create", "triagesService.getById", "triagesService.updateById", "triagesService.deleteById"], "search-terms": ["triages", "triagesController", "triagesService", "validation", "crud", "patient-triage"], "state": 2, "file_id": 23, "knowledge_revision": 46, "git_revision": "", "ctags": [{"_type": "tag", "name": "TriagesController", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^class TriagesController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "controller", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  controller: new TriagesController(),$/", "language": "JavaScript", "kind": "property", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  async create(req, res, next) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res, next)", "scope": "TriagesController", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  create: [$/", "language": "JavaScript", "kind": "property", "scope": "validators", "scopeKind": "class"}, {"_type": "tag", "name": "deleted", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^      const deleted = await triagesService.deleteById(req.params.id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^module.exports = {$/", "language": "JavaScript", "kind": "class", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "idParam", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  idParam: [param('id').isMongoId().withMessage('Invalid triage id')],$/", "language": "JavaScript", "kind": "property", "scope": "validators", "scopeKind": "class"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^      const item = await triagesService.getById(req.params.id);$/", "language": "JavaScript", "kind": "field", "scope": "TriagesController", "scopeKind": "class"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^      if (!item) return res.status(404).json({ status: 'error', message: 'Triage not found' });$/", "language": "JavaScript", "kind": "field", "scope": "TriagesController", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  async list(req, res, next) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res, next)", "scope": "TriagesController", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  list: [$/", "language": "JavaScript", "kind": "property", "scope": "validators", "scopeKind": "class"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  async get(req, res, next) {$/", "language": "JavaScript", "kind": "field", "scope": "TriagesController", "scopeKind": "class"}, {"_type": "tag", "name": "req", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  async get(req, res, next) {$/", "language": "JavaScript", "kind": "field", "scope": "TriagesController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^      if (!item) return res.status(404).json({ status: 'error', message: 'Triage not found' });$/", "language": "JavaScript", "kind": "field", "scope": "TriagesController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^      res.json({ status: 'ok', item });$/", "language": "JavaScript", "kind": "field", "scope": "TriagesController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  async get(req, res, next) {$/", "language": "JavaScript", "kind": "field", "scope": "TriagesController", "scopeKind": "class"}, {"_type": "tag", "name": "triagesService", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^const triagesService = require('..\\/services\\/triages');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  update: [$/", "language": "JavaScript", "kind": "property", "scope": "validators", "scopeKind": "class"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^      const updated = await triagesService.updateById(req.params.id, req.body);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validators", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^  validators,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "validators", "path": "/home/kavia/workspace/code-generation/patient-triage-records-management-system-94815-94731/backend_triagens/src/controllers/triages.js", "pattern": "/^const validators = {$/", "language": "JavaScript", "kind": "class"}], "hash": "1edb5913bd967639e8e86203b4807e12", "format-version": 4, "code-base-name": "backend_triagens", "filename": "backend_triagens/src/controllers/triages.js", "fields": [{"name": "controller: new TriagesController(),", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "create: [", "scope": "validators", "scopeKind": "class", "description": "unavailable"}, {"name": "idParam: [param('id').isMongoId().withMessage('Invalid triage id')],", "scope": "validators", "scopeKind": "class", "description": "unavailable"}, {"name": "const item = await triagesService.getById(req.params.id);", "scope": "TriagesController", "scopeKind": "class", "description": "unavailable"}, {"name": "if (!item) return res.status(404).json({ status: 'error', message: 'Triage not found' });", "scope": "TriagesController", "scopeKind": "class", "description": "unavailable"}, {"name": "list: [", "scope": "validators", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(req, res, next) {", "scope": "TriagesController", "scopeKind": "class", "description": "unavailable"}, {"name": "res.json({ status: 'ok', item });", "scope": "TriagesController", "scopeKind": "class", "description": "unavailable"}, {"name": "update: [", "scope": "validators", "scopeKind": "class", "description": "unavailable"}, {"name": "validators,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"46": ""}]}